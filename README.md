# autowatering-plant
## Компоненты
1. ESP32
2. Датчик влажности [Image](https://voltiq.ru/wp-content/uploads/moisture-sensor-and-arduino-1-720x720.jpg "Image")
3. Помпа/Мембранный насос [Image](https://i.imgur.com/AkUfhld.png "Image") [Image](http://eschemo.ru/wp-content/uploads/2013/08/Nasos-dlya-stekloomyivatelya.jpg "Image")
4. 2 гибких трубки по которым будет поступать вода [Image](https://i.imgur.com/ShcU29B.png "Image")
5. Провода [Image](https://static-eu.insales.ru/images/products/1/3852/6475532/A-JFM.JPG "Image")
6. Экранчик и кнопки по желанию
7. Блок питания


## первая версия
### описание конструкции
- Датчик влажности почвы 1шт
- Датчик уровня жидкости 1шт
- ESP32 1шт
- Мосфет для управления насосом
- Насос

### логика работы
**Инициализация** 
ESP32 подключается к сайту и читает параметры полива для выбранного растения (нужно обсудить как определять выбранное растение)
После чего проверяет влажность и запускает основной цикл работы
**основной цикл работы** 
Замер влажности, если ее не достаточно, то выдерживается интервал просыхания и выполняется полив, после чего выдерживается промежуток на намокание почвы и выполняется контрольный замер, если не достаточно то повторяем с промежутка намокания. После чего определяется время высыхания и ввдерживается пауза просыхания почвы.
Параллельно контролируется датчик наличия воды в емкости для полива. При ее отсутствии, останавливается основной цикл и направляется уведомление telegram, viber, slack или sms
Также предусматривается ручной режим управления через google home mini (набор инструкций и логика требует обсужденияд
**индикация** 
Размещаем на плате светодиоды или используем штатные.
Первый при обращении к сайту моргает, если данные получены - горит постоянно в течение минуты, потом погасает. Если ошибка, то можно зажечь красный (третий).
Второй светиться в момент открытия мосфета.
Третий моргает когда недостаточно воды в емкости.

### ближайший план:
1. включить на ESP управление мотором и работу с датчиком влажности
2. разобраться как подключить устройство к Google Home
3. проверить можно ли использовать google home без интернета
4. размешаем в сети несколько алгоритмов ухода за растениями (мини сайт)
5. придумываем как делать для девайса выбор типа растения
6. собираем все)

## вторая версия
Дополняем систему датчиками освещенности, температуры и влажности воздуха
И управляющими устройствами управления температурой, освещенностью и влажностью воздуха

## третья версия
Переходим от образца к модели устройства, добавляем ...